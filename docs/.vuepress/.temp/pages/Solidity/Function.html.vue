<template><div><h1 id="_3-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_3-å‡½æ•°"><span>3. å‡½æ•°</span></a></h1>
<h2 id="å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°"><span>å‡½æ•°</span></a></h2>
<p>Solidityè¯­è¨€çš„å‡½æ•°éå¸¸çµæ´»ï¼Œå¯ä»¥è¿›è¡Œå„ç§å¤æ‚æ“ä½œã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šæ¦‚è¿°å‡½æ•°çš„åŸºç¡€æ¦‚å¿µï¼Œå¹¶é€šè¿‡ä¸€äº›ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨å‡½æ•°ã€‚</p>
<p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ Solidity ä¸­å‡½æ•°çš„å½¢å¼:</p>
<div class="language-solidity line-numbers-mode" data-highlighter="prismjs" data-ext="solidity" data-title="solidity"><pre v-pre><code><span class="line"><span class="token keyword">function</span> <span class="token operator">&lt;</span><span class="token keyword">function</span> name<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span>parameter types<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">internal</span><span class="token operator">|</span><span class="token keyword">external</span><span class="token operator">|</span><span class="token keyword">public</span><span class="token operator">|</span><span class="token keyword">private</span><span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token keyword">pure</span><span class="token operator">|</span><span class="token keyword">view</span><span class="token operator">|</span><span class="token keyword">payable</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>virtual<span class="token operator">|</span>override<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>modifiers<span class="token operator">></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token keyword">return</span> types<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token operator">&lt;</span><span class="token keyword">function</span> body<span class="token operator">></span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p>çœ‹ç€æœ‰ä¸€äº›å¤æ‚ï¼Œè®©æˆ‘ä»¬ä»å‰å¾€åé€ä¸ªè§£é‡Š(æ–¹æ‹¬å·ä¸­çš„æ˜¯å¯å†™å¯ä¸
å†™çš„å…³é”®å­—)ï¼š</p>
<ol>
<li>
<p><code v-pre>function</code>ï¼šå£°æ˜å‡½æ•°æ—¶çš„å›ºå®šç”¨æ³•ã€‚è¦ç¼–å†™å‡½æ•°ï¼Œå°±éœ€è¦ä»¥ <code v-pre>function</code> å…³é”®å­—å¼€å¤´ã€‚</p>
</li>
<li>
<p><code v-pre>&lt;function name&gt;</code>ï¼šå‡½æ•°åã€‚</p>
</li>
<li>
<p><code v-pre>([parameter types[, ...]])</code>ï¼šåœ†æ‹¬å·å†…å†™å…¥å‡½æ•°çš„å‚æ•°ï¼Œå³è¾“å…¥åˆ°å‡½æ•°çš„å˜é‡ç±»å‹å’Œåç§°ã€‚</p>
</li>
<li>
<p><code v-pre>{internal|external|public|private}</code>ï¼šå‡½æ•°å¯è§æ€§è¯´æ˜ç¬¦ï¼Œå…±æœ‰4ç§ã€‚</p>
<ul>
<li><code v-pre>public</code>ï¼šå†…éƒ¨å’Œå¤–éƒ¨å‡å¯è§ã€‚</li>
<li><code v-pre>private</code>ï¼šåªèƒ½ä»æœ¬åˆçº¦å†…éƒ¨è®¿é—®ï¼Œç»§æ‰¿çš„åˆçº¦ä¹Ÿä¸èƒ½ä½¿ç”¨ã€‚</li>
<li><code v-pre>external</code>ï¼šåªèƒ½ä»åˆçº¦å¤–éƒ¨è®¿é—®ï¼ˆä½†å†…éƒ¨å¯ä»¥é€šè¿‡ <code v-pre>this.f()</code> æ¥è°ƒç”¨ï¼Œ<code v-pre>f</code>æ˜¯å‡½æ•°åï¼‰ã€‚</li>
<li><code v-pre>internal</code>: åªèƒ½ä»åˆçº¦å†…éƒ¨è®¿é—®ï¼Œç»§æ‰¿çš„åˆçº¦å¯ä»¥ç”¨ã€‚</li>
</ul>
<p><strong>æ³¨æ„ 1</strong>ï¼šåˆçº¦ä¸­å®šä¹‰çš„å‡½æ•°éœ€è¦æ˜ç¡®æŒ‡å®šå¯è§æ€§ï¼Œå®ƒä»¬æ²¡æœ‰é»˜è®¤å€¼ã€‚</p>
<p><strong>æ³¨æ„ 2</strong>ï¼š<code v-pre>public|private|internal</code> ä¹Ÿå¯ç”¨äºä¿®é¥°çŠ¶æ€å˜é‡(å®šä¹‰å¯å‚è€ƒ<a href="%5B../05_DataStorage/readme.md%5D">WTF Solidity ç¬¬5è®²çš„ç›¸å…³å†…å®¹</a>)ã€‚<code v-pre>public</code>å˜é‡ä¼šè‡ªåŠ¨ç”ŸæˆåŒåçš„<code v-pre>getter</code>å‡½æ•°ï¼Œç”¨äºæŸ¥è¯¢æ•°å€¼ã€‚æœªæ ‡æ˜å¯è§æ€§ç±»å‹çš„çŠ¶æ€å˜é‡ï¼Œé»˜è®¤ä¸º<code v-pre>internal</code>ã€‚</p>
</li>
<li>
<p><code v-pre>[pure|view|payable]</code>ï¼šå†³å®šå‡½æ•°æƒé™/åŠŸèƒ½çš„å…³é”®å­—ã€‚<code v-pre>payable</code>ï¼ˆå¯æ”¯ä»˜çš„ï¼‰å¾ˆå¥½ç†è§£ï¼Œå¸¦ç€å®ƒçš„å‡½æ•°ï¼Œè¿è¡Œçš„æ—¶å€™å¯ä»¥ç»™åˆçº¦è½¬å…¥ ETHã€‚<code v-pre>pure</code> å’Œ <code v-pre>view</code> çš„ä»‹ç»è§ä¸‹ä¸€èŠ‚ã€‚</p>
</li>
<li>
<p><code v-pre>[virtual|override]</code>: æ–¹æ³•æ˜¯å¦å¯ä»¥è¢«é‡å†™ï¼Œæˆ–è€…æ˜¯å¦æ˜¯é‡å†™æ–¹æ³•ã€‚<code v-pre>virtual</code>ç”¨åœ¨çˆ¶åˆçº¦ä¸Šï¼Œæ ‡è¯†çš„æ–¹æ³•å¯ä»¥è¢«å­åˆçº¦é‡å†™ã€‚<code v-pre>override</code>ç”¨åœ¨è‡ªåˆçº¦ä¸Šï¼Œè¡¨åæ–¹æ³•é‡å†™äº†çˆ¶åˆçº¦çš„æ–¹æ³•ã€‚</p>
</li>
<li>
<p><code v-pre>&lt;modifiers&gt;</code>: è‡ªå®šä¹‰çš„ä¿®é¥°å™¨ï¼Œå¯ä»¥æœ‰0ä¸ªæˆ–å¤šä¸ªä¿®é¥°å™¨ã€‚</p>
</li>
<li>
<p><code v-pre>[returns ()]</code>ï¼šå‡½æ•°è¿”å›çš„å˜é‡ç±»å‹å’Œåç§°ã€‚</p>
</li>
<li>
<p><code v-pre>&lt;function body&gt;</code>: å‡½æ•°ä½“ã€‚</p>
</li>
</ol>
<h2 id="åˆ°åº•ä»€ä¹ˆæ˜¯-pure-å’Œview" tabindex="-1"><a class="header-anchor" href="#åˆ°åº•ä»€ä¹ˆæ˜¯-pure-å’Œview"><span>åˆ°åº•ä»€ä¹ˆæ˜¯ <code v-pre>Pure</code> å’Œ<code v-pre>View</code>ï¼Ÿ</span></a></h2>
<p>åˆšå¼€å§‹å­¦ä¹  <code v-pre>solidity</code> æ—¶ï¼Œ<code v-pre>pure</code> å’Œ <code v-pre>view</code> å…³é”®å­—å¯èƒ½ä»¤äººè´¹è§£ï¼Œå› ä¸ºå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­æ²¡æœ‰ç±»ä¼¼çš„å…³é”®å­—ã€‚<code v-pre>solidity</code> å¼•å…¥è¿™ä¸¤ä¸ªå…³é”®å­—ä¸»è¦æ˜¯å› ä¸º ä»¥å¤ªåŠäº¤æ˜“éœ€è¦æ”¯ä»˜æ°”è´¹ï¼ˆgas feeï¼‰ã€‚åˆçº¦çš„çŠ¶æ€å˜é‡å­˜å‚¨åœ¨é“¾ä¸Šï¼Œgas fee å¾ˆè´µï¼Œå¦‚æœè®¡ç®—ä¸æ”¹å˜é“¾ä¸ŠçŠ¶æ€ï¼Œå°±å¯ä»¥ä¸ç”¨ä»˜ <code v-pre>gas</code>ã€‚åŒ…å« <code v-pre>pure</code> å’Œ <code v-pre>view</code> å…³é”®å­—çš„å‡½æ•°æ˜¯ä¸æ”¹å†™é“¾ä¸ŠçŠ¶æ€çš„ï¼Œå› æ­¤ç”¨æˆ·ç›´æ¥è°ƒç”¨å®ƒä»¬æ˜¯ä¸éœ€è¦ä»˜ gas çš„ï¼ˆæ³¨æ„ï¼Œåˆçº¦ä¸­é <code v-pre>pure</code>/<code v-pre>view</code> å‡½æ•°è°ƒç”¨ <code v-pre>pure</code>/<code v-pre>view</code> å‡½æ•°æ—¶éœ€è¦ä»˜gasï¼‰ã€‚</p>
<p>åœ¨ä»¥å¤ªåŠä¸­ï¼Œä»¥ä¸‹è¯­å¥è¢«è§†ä¸ºä¿®æ”¹é“¾ä¸ŠçŠ¶æ€ï¼š</p>
<ol>
<li>å†™å…¥çŠ¶æ€å˜é‡ã€‚</li>
<li>é‡Šæ”¾äº‹ä»¶ã€‚</li>
<li>åˆ›å»ºå…¶ä»–åˆçº¦ã€‚</li>
<li>ä½¿ç”¨ <code v-pre>selfdestruct</code>.</li>
<li>é€šè¿‡è°ƒç”¨å‘é€ä»¥å¤ªå¸ã€‚</li>
<li>è°ƒç”¨ä»»ä½•æœªæ ‡è®° <code v-pre>view</code> æˆ– <code v-pre>pure</code> çš„å‡½æ•°ã€‚</li>
<li>ä½¿ç”¨ä½çº§è°ƒç”¨ï¼ˆlow-level callsï¼‰ã€‚</li>
<li>ä½¿ç”¨åŒ…å«æŸäº›æ“ä½œç çš„å†…è”æ±‡ç¼–ã€‚</li>
</ol>
<p>ä¸ºäº†å¸®åŠ©å¤§å®¶ç†è§£ï¼Œæˆ‘ç”»äº†ä¸€ä¸ªé©¬é‡Œå¥¥æ’å›¾ã€‚åœ¨è¿™å¹…æ’å›¾ä¸­ï¼Œæˆ‘å°†åˆçº¦ä¸­çš„çŠ¶æ€å˜é‡ï¼ˆå­˜å‚¨åœ¨é“¾ä¸Šï¼‰æ¯”ä½œç¢§çªå…¬ä¸»ï¼Œä¸‰ç§ä¸åŒçš„è§’è‰²ä»£è¡¨ä¸åŒçš„å…³é”®å­—ã€‚</p>
<p><img src="https://images.mirror-media.xyz/publication-images/1B9kHsTYnDY_QURSWMmPb.png?height=1028&amp;width=1758" alt="WTF is pure and view in solidity?"></p>
<ul>
<li>
<p><code v-pre>pure</code>ï¼Œä¸­æ–‡æ„æ€æ˜¯â€œçº¯â€ï¼Œè¿™é‡Œå¯ä»¥ç†è§£ä¸ºâ€çº¯æ‰“é…±æ²¹çš„â€ã€‚<code v-pre>pure</code> å‡½æ•°æ—¢ä¸èƒ½è¯»å–ä¹Ÿä¸èƒ½å†™å…¥é“¾ä¸Šçš„çŠ¶æ€å˜é‡ã€‚å°±åƒå°æ€ªä¸€æ ·ï¼Œçœ‹ä¸åˆ°ä¹Ÿæ‘¸ä¸åˆ°ç¢§çªå…¬ä¸»ã€‚</p>
</li>
<li>
<p><code v-pre>view</code>ï¼Œâ€œçœ‹â€ï¼Œè¿™é‡Œå¯ä»¥ç†è§£ä¸ºâ€œçœ‹å®¢â€ã€‚<code v-pre>view</code>å‡½æ•°èƒ½è¯»å–ä½†ä¹Ÿä¸èƒ½å†™å…¥çŠ¶æ€å˜é‡ã€‚ç±»ä¼¼é©¬é‡Œå¥¥ï¼Œèƒ½çœ‹åˆ°ç¢§çªå…¬ä¸»ï¼Œä½†ç»ˆç©¶æ˜¯çœ‹å®¢ï¼Œä¸èƒ½å…¥æ´æˆ¿ã€‚</p>
</li>
<li>
<p>é <code v-pre>pure</code> æˆ– <code v-pre>view</code> çš„å‡½æ•°æ—¢å¯ä»¥è¯»å–ä¹Ÿå¯ä»¥å†™å…¥çŠ¶æ€å˜é‡ã€‚ç±»ä¼¼é©¬é‡Œå¥¥é‡Œçš„ <code v-pre>boss</code>ï¼Œå¯ä»¥å¯¹ç¢§çªå…¬ä¸»ä¸ºæ‰€æ¬²ä¸ºğŸ¶ã€‚</p>
</li>
</ul>
<h2 id="ä»£ç " tabindex="-1"><a class="header-anchor" href="#ä»£ç "><span>ä»£ç </span></a></h2>
<h3 id="_1-pure-å’Œ-view" tabindex="-1"><a class="header-anchor" href="#_1-pure-å’Œ-view"><span>1. pure å’Œ view</span></a></h3>
<p>æˆ‘ä»¬åœ¨åˆçº¦é‡Œå®šä¹‰ä¸€ä¸ªçŠ¶æ€å˜é‡ <code v-pre>number</code>ï¼Œåˆå§‹åŒ–ä¸º 5ã€‚</p>
<div class="language-solidity line-numbers-mode" data-highlighter="prismjs" data-ext="solidity" data-title="solidity"><pre v-pre><code><span class="line"><span class="token comment">// SPDX-License-Identifier: MIT</span></span>
<span class="line"><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.21</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">contract</span> <span class="token class-name">FunctionTypes</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">uint256</span> <span class="token keyword">public</span> number <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®šä¹‰ä¸€ä¸ª <code v-pre>add()</code> å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨ä¼šè®© <code v-pre>number</code> å¢åŠ  1ã€‚</p>
<div class="language-solidity line-numbers-mode" data-highlighter="prismjs" data-ext="solidity" data-title="solidity"><pre v-pre><code><span class="line"><span class="token comment">// é»˜è®¤function</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span><span class="token punctuation">{</span></span>
<span class="line">    number <span class="token operator">=</span> number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœ <code v-pre>add()</code> å‡½æ•°è¢«æ ‡è®°ä¸º <code v-pre>pure</code>ï¼Œæ¯”å¦‚ <code v-pre>function add() external pure</code>ï¼Œå°±ä¼šæŠ¥é”™ã€‚å› ä¸º <code v-pre>pure</code> æ˜¯ä¸é…è¯»å–åˆçº¦é‡Œçš„çŠ¶æ€å˜é‡çš„ï¼Œæ›´ä¸é…æ”¹å†™ã€‚é‚£ <code v-pre>pure</code> å‡½æ•°èƒ½åšäº›ä»€ä¹ˆï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥ç»™å‡½æ•°ä¼ é€’ä¸€ä¸ªå‚æ•° <code v-pre>_number</code>ï¼Œç„¶åè®©ä»–è¿”å› <code v-pre>_number + 1</code>ï¼Œè¿™ä¸ªæ“ä½œä¸ä¼šè¯»å–æˆ–å†™å…¥çŠ¶æ€å˜é‡ã€‚</p>
<div class="language-solidity line-numbers-mode" data-highlighter="prismjs" data-ext="solidity" data-title="solidity"><pre v-pre><code><span class="line"><span class="token comment">// pure: çº¯çº¯ç‰›é©¬</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">addPure</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> _number<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> new_number<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    new_number <span class="token operator">=</span> _number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="@source/Solidity/img/3-3.png" alt="3-3.png"></p>
<p>å¦‚æœ <code v-pre>add()</code> å‡½æ•°è¢«æ ‡è®°ä¸º <code v-pre>view</code>ï¼Œæ¯”å¦‚ <code v-pre>function add() external view</code>ï¼Œä¹Ÿä¼šæŠ¥é”™ã€‚å› ä¸º <code v-pre>view</code> èƒ½è¯»å–ï¼Œä½†ä¸èƒ½å¤Ÿæ”¹å†™çŠ¶æ€å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥ç¨å¾®æ”¹å†™ä¸‹å‡½æ•°ï¼Œè¯»å–ä½†æ˜¯ä¸æ”¹å†™ <code v-pre>number</code>ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å˜é‡ã€‚</p>
<div class="language-solidity line-numbers-mode" data-highlighter="prismjs" data-ext="solidity" data-title="solidity"><pre v-pre><code><span class="line"><span class="token comment">// view: çœ‹å®¢</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">addView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> new_number<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    new_number <span class="token operator">=</span> number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="@source/Solidity/img/3-4.png" alt="3-4.png"></p>
<h3 id="_2-internal-v-s-external" tabindex="-1"><a class="header-anchor" href="#_2-internal-v-s-external"><span>2. internal v.s. external</span></a></h3>
<div class="language-solidity line-numbers-mode" data-highlighter="prismjs" data-ext="solidity" data-title="solidity"><pre v-pre><code><span class="line"><span class="token comment">// internal: å†…éƒ¨å‡½æ•°</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">internal</span> <span class="token punctuation">{</span></span>
<span class="line">    number <span class="token operator">=</span> number <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åˆçº¦å†…çš„å‡½æ•°å¯ä»¥è°ƒç”¨å†…éƒ¨å‡½æ•°</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">minusCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª <code v-pre>internal</code> çš„ <code v-pre>minus()</code> å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨ä½¿å¾— <code v-pre>number</code> å˜é‡å‡å°‘ 1ã€‚ç”±äº <code v-pre>internal</code> å‡½æ•°åªèƒ½ç”±åˆçº¦å†…éƒ¨è°ƒç”¨ï¼Œæˆ‘ä»¬å¿…é¡»å†å®šä¹‰ä¸€ä¸ª <code v-pre>external</code> çš„ <code v-pre>minusCall()</code> å‡½æ•°ï¼Œé€šè¿‡å®ƒé—´æ¥è°ƒç”¨å†…éƒ¨çš„ <code v-pre>minus()</code> å‡½æ•°ã€‚</p>
<p><img src="@source/Solidity/img/3-1.png" alt="3-1.png"></p>
<h3 id="_3-payable" tabindex="-1"><a class="header-anchor" href="#_3-payable"><span>3. payable</span></a></h3>
<div class="language-solidity line-numbers-mode" data-highlighter="prismjs" data-ext="solidity" data-title="solidity"><pre v-pre><code><span class="line"><span class="token comment">// payable: é€’é’±ï¼Œèƒ½ç»™åˆçº¦æ”¯ä»˜ethçš„å‡½æ•°</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">minusPayable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> balance<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    balance <span class="token operator">=</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>balance<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª <code v-pre>external payable</code> çš„ <code v-pre>minusPayable()</code> å‡½æ•°ï¼Œé—´æ¥çš„è°ƒç”¨ <code v-pre>minus()</code>ï¼Œå¹¶ä¸”è¿”å›åˆçº¦é‡Œçš„ ETH ä½™é¢ï¼ˆ<code v-pre>this</code> å…³é”®å­—å¯ä»¥è®©æˆ‘ä»¬å¼•ç”¨åˆçº¦åœ°å€ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨ <code v-pre>minusPayable()</code> æ—¶å¾€åˆçº¦é‡Œè½¬å…¥1ä¸ª ETHã€‚</p>
<p><img src="https://images.mirror-media.xyz/publication-images/ETDPN8myq7jFfAL8CUAFt.png?height=148&amp;width=588" alt="mirror-image-1"></p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨è¿”å›çš„ä¿¡æ¯ä¸­çœ‹åˆ°ï¼Œåˆçº¦çš„ä½™é¢å˜ä¸º 1 ETHã€‚</p>
<p><img src="https://images.mirror-media.xyz/publication-images/nGZ2pz0MvzgXuKrENJPYf.png?height=128&amp;width=1130" alt="mirror-image-2"></p>
<p><img src="@source/Solidity/img/3-2.png" alt="3-2.png"></p>
<h2 id="å®Œæ•´åˆçº¦" tabindex="-1"><a class="header-anchor" href="#å®Œæ•´åˆçº¦"><span>å®Œæ•´åˆçº¦</span></a></h2>
<div class="language-solidity line-numbers-mode" data-highlighter="prismjs" data-ext="solidity" data-title="solidity"><pre v-pre><code><span class="line"><span class="token comment">// SPDX-License-Identifier: MIT</span></span>
<span class="line"><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.21</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">contract</span> <span class="token class-name">FunctionTypes</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">uint256</span> <span class="token keyword">public</span> number <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// å‡½æ•°ç±»å‹</span></span>
<span class="line">    <span class="token comment">// function (&lt;parameter types>) {internal|external} [pure|view|payable] [returns (&lt;return types>)]</span></span>
<span class="line">    <span class="token comment">// é»˜è®¤function</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span><span class="token punctuation">{</span></span>
<span class="line">        number <span class="token operator">=</span> number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// pure: çº¯çº¯ç‰›é©¬</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">addPure</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> _number<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> new_number<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        new_number <span class="token operator">=</span> _number<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// view: çœ‹å®¢</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">addView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> new_number<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        new_number <span class="token operator">=</span> number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// internal: å†…éƒ¨å‡½æ•°</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">internal</span> <span class="token punctuation">{</span></span>
<span class="line">        number <span class="token operator">=</span> number <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// åˆçº¦å†…çš„å‡½æ•°å¯ä»¥è°ƒç”¨å†…éƒ¨å‡½æ•°</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">minusCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// payable: é€’é’±ï¼Œèƒ½ç»™åˆçº¦æ”¯ä»˜ethçš„å‡½æ•°</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">minusPayable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> balance<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">minus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        balance <span class="token operator">=</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>balance<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


